(this.webpackJsonpzman=this.webpackJsonpzman||[]).push([[0],{41:function(e,n,t){e.exports=t(59)},46:function(e,n,t){},47:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},48:function(e,n,t){},59:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),i=t(17),r=t.n(i),c=(t(46),t(47),t(48),t(14)),l=t(20);window.AudioContext=window.AudioContext||window.webkitAudioContext,window.audiocontext=window.audiocontext||new window.AudioContext;var u=window.audiocontext,s=u.createGain();s.connect(u.destination);var f=function(e){e||(e={}),console.warn("AUDIO",u.state);var n=e.frequency||440,t=e.interval||250,a=e.duration||1,o=function(e){e||(e=1),function o(i){!function(){console.warn("AUDIO play",u.state);var e=u.currentTime,t=u.createOscillator(),o=u.createGain();o.connect(s),t.connect(o),o.gain.setValueAtTime(o.gain.value,e),o.gain.exponentialRampToValueAtTime(1e-4,e+a),t.onended=function(){o.disconnect(s),t.disconnect(o)},t.type="sine",t.frequency.value=n,t.start(e),t.stop(e+a)}(),++i<e&&setTimeout(o,t,i)}(0)};return o.destroy=function(){e.context||u.close()},o},m=t(21);function d(){var e=Object(l.a)(["\n   display:flex;\n   align-items: flex-end;\n   justify-content:center;\n   flex:1;\n   font-size:10em;\n   letter-spacing:1px;\n   max-height:200px;\n"]);return d=function(){return e},e}var p=m.a.div(d()),x=f({duration:.8}),v=f({duration:1}),g=function(e){var n=Object(a.useState)(e.time),t=Object(c.a)(n,2),i=t[0],r=t[1],l=Object(a.useState)(e.time),u=Object(c.a)(l,2),s=u[0],f=u[1],m=function(){if(e.start){var n=s-(new Date-e.start)/1e3;n<=.2?(n=0,r(0),console.warn("ending!"),e.onEnd()):(Math.ceil(i)>Math.ceil(n)&&(n<=3&&x(1),n<=1&&v(1)),r(n))}};return Object(a.useEffect)((function(){var e=requestAnimationFrame(m);return function(){cancelAnimationFrame(e)}}),[i]),Object(a.useEffect)((function(){if(e.start){console.warn("Timer starts! use effect timer start",e,i);var n=requestAnimationFrame(m);return function(){cancelAnimationFrame(n)}}console.log("setting original time"),f(i)}),[e.start]),Object(a.useEffect)((function(){console.log("props.time changed, setting",e.time),f(e.time)}),[e.time]),o.a.createElement(p,null,-1!==i?Math.ceil(i):"fin")},b=t(74),w=t(75),h=t(36),E=t.n(h),y=t(35),O=t.n(y),j=t(13);function A(){var e=Object(l.a)(["\n  flex:1;\n  display:flex;\n  flex-direction:column;\n  justify-content:center;\n  align-items:center;\n\n  background:black;\n\n  padding:20px;\n\n  buttondiv {\n    position:relative;\n    display:flex;\n    flex:1;\n    max-height:50px;\n  }\n  button {\n   text-transform:uppercase;\n   flex:1;\n  }\n\n  counter {\n    align-items:flex-end;\n    display: flex;\n    flex-direction:column;\n    flex:1;\n    font-size:20px;\n    max-height:30px;\n  }\n\n  .progress {\n    padding-top:15px;\n    width:50px;\n  } \n\n  label {\n   max-height:50px;\n   font-size:30px;\n   flex:1;\n   align-items:flex-start;\n  }\n\n  sublabel {\n   max-height:40px;\n   font-size:16px;\n   color:grey;\n   flex:1;\n   align-items:flex-start;\n  }\n\n"]);return A=function(){return e},e}var k=f({duration:.8,interval:200}),S=m.a.div(A());var z=function(e){var n=Object(a.useState)(null),t=Object(c.a)(n,2),i=t[0],r=t[1],l=Object(a.useState)(null),u=Object(c.a)(l,2),s=u[0],f=u[1],m=Object(a.useState)(0),d=Object(c.a)(m,2),p=d[0],x=d[1],v=new URLSearchParams(Object(j.d)().search).get("set");v||(v="1,Get ready,5|9,Work/Rest,30/10");if(Object(a.useEffect)((function(){var e=function(e){var n=[],t=e.split("|"),a=!0,o=!1,i=void 0;try{for(var r,l=t[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var u=r.value,s=u.split(","),f=Object(c.a)(s,3),m=f[0],d=f[1],p=f[2];p=p.split("/").map((function(e){return parseInt(e)})),d=d.split("/"),console.log("parts",m,d,p,u);for(var x=0;x<m*d.length;x++){var v={label:d[x%d.length],time:p[x%p.length]};n.push(v)}}}catch(g){o=!0,i=g}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return console.log("parsed",n),n}(v);f(e)}),[]),Object(a.useEffect)((function(){console.warn("start changed! start from timerset",i)}),[i]),!v)return null;if(!s||!s[p])return null;var h=s.slice(0,p+1).reduce((function(e,n){return e+n.time}),0)/s.reduce((function(e,n){return e+n.time}),0)*100;console.log("progress",h);var y=s[p],A=y.time,z=y.label,T=s[p+1]||{},C=T.time,D=T.label;console.log("label",z,A,p,s);var q=i?o.a.createElement(O.a,null):o.a.createElement(E.a,null);return o.a.createElement(S,null,o.a.createElement("counter",null,o.a.createElement("div",null,"".concat(p+1," / ").concat(s.length)),o.a.createElement("div",{className:"progress"},o.a.createElement(w.a,{variant:"determinate",value:h,color:"secondary"}))),o.a.createElement(g,Object.assign({key:p},{time:A,label:z,running:p},{onEnd:function(){console.warn("on end on timerset!"),r(null),s[p+1]?(x((function(e){return e+1})),r(new Date)):k(2)},start:i})),o.a.createElement("label",null,z),o.a.createElement("sublabel",null,"Next: ".concat(D," / ").concat(C)),o.a.createElement("buttondiv",null,o.a.createElement(b.a,{color:"primary","aria-label":"run",onClick:function(){"suspended"===window.audiocontext.state&&window.audiocontext.resume(),r(i?null:new Date)}},q)))},T=t(26);var C=function(){return o.a.createElement(T.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(z,null)))},D=new(t(37));document.addEventListener("click",(function e(){document.removeEventListener("click",e,!1),console.log("enabling no sleep"),D.enable()}),!1);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[41,1,2]]]);
//# sourceMappingURL=main.7a69e714.chunk.js.map